<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Special Message</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#ffcd7d;
    font-family:Arial, sans-serif;
    overflow:hidden;
}

.container{
    position:relative;
    width:80%;
    max-width:900px;
}

.text{
    font-size:60px;
    font-weight:bold;
    color:#6b3fbc;
    line-height:1.4;
    transition:all 0.25s ease;
}

.resizer{
    width:20px;
    height:100%;
    position:absolute;
    right:-10px;
    top:0;
    cursor:ew-resize;
    background:rgba(0,0,0,0.1);
    border-radius:5px;
}
</style>
</head>
<body>

<div class="container">
    <div class="text" id="message">Hai Febri</div>
    <div class="resizer" id="resizer"></div>
</div>

<audio id="popSound" src="balloon-pop.mp3" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/@mojs/core"></script>

<script>

const message = document.getElementById("message");
const resizer = document.getElementById("resizer");
const popSound = document.getElementById("popSound");

const texts = [

`Hai Febri`,

`Mungkin ini sedikit alay atau norak, tapi kalau ada waktu minta tolong dibaca ya:)`,

`Jadi besok kan ulang tahunmu, aku berdoa agar kamu selalu diberikan kemudahan, diberikan kasih sayang oleh orang terdekat kamu, dan bisa melewati hari hari kamu yang berat itu`,

`Mungkin aku tidak bisa memberikan apa-apa, tapi setidaknya aku menulis ini bener bener dari hati aku`,

`Terima kasih sudah pernah datang ke hidup aku, dan juga terima kasih sudah membantuku sejauh ini. Bisa kenalan sama kamu itu menurutku udah cukup membuat hari hari ku tidak menjadi biasa lagi:). Mungkin aku juga minta maaf jika aku pernah salah ke kamu`,

`Yah mungkin ini cuma sekedar isi hatiku, bisa dibilang pertemuan kita itu bener bener gak ketebak sih hahaha, tapi aku gak menyangka bisa mengenalmu sedekat ini, even kita bisa sampai nyaman mengobrol berdua. Itu yang membuat aku seneng sih`,

`Pertemuan kita sebenarnya sangat pendek yah, kamu maret udah gak magang lagi, sedangkan aku sampe mei. Bisa dibilang itu halangan buat kita untuk ketemu tiap hari, tapi walaupun kamu pergi lebih dulu aku gak akan melupakan kamu selama magang. Karena kamu bener bener memberi semangat ketika magang.`,

`Yah biar gak panjang-panjang lah ya, langsung saja. Selamat ulang tahun ya Febri, aku belum bisa memberi yang terbaik untuk kamu. Aku hanya bisa memberi ini. Kalo pun minta hadiah lain kali aja lah ya hehehe, kan kamu juga balik ke Mojokerto juga dan kebetulan kamu pas balik ke sby kemungkinan juga puasa.`,

`Kalo kamu ngerasa kepanjangan, maaf ya wehhh:(. Kalo ada waktu aja baca ini, btw ngepromptnya susah ini huhuuuu:)`

];

let stage = 0;
let isDragging = false;
let startX;
let startFontSize;

const fontMin = 30;
const fontMax = 60;

function showBurst(){
    new mojs.Burst({
        parent: message,
        radius:{0:100},
        count:12,
        children:{
            shape:'circle',
            radius:{8:0},
            fill:['deeppink','red','magenta'],
            duration:700
        }
    }).play();
}

function updateStage(newStage){
    if(newStage === stage) return;

    stage = newStage;
    message.innerText = texts[stage];

    popSound.currentTime = 0;
    popSound.play();
    showBurst();
}

resizer.addEventListener("mousedown",(e)=>{
    isDragging = true;
    startX = e.clientX;
    startFontSize = parseInt(window.getComputedStyle(message).fontSize);
});

document.addEventListener("mousemove",(e)=>{
    if(!isDragging) return;

    const dx = e.clientX - startX;
    let newSize = startFontSize + dx;

    newSize = Math.max(fontMin, Math.min(fontMax,newSize));
    message.style.fontSize = newSize + "px";

    const percent = (newSize - fontMin)/(fontMax - fontMin);

    // 0 sampai 8 stage
    let newStage = Math.floor((1 - percent) * 4);

    if(percent < 0.2) newStage = 4;
    if(percent > 0.2 && percent < 0.4) newStage = 3;
    if(percent >= 0.4 && percent < 0.6) newStage = 2;
    if(percent >= 0.6 && percent < 0.8) newStage = 1;
    if(percent >= 0.8) newStage = 0;

    // Jika membesar lagi setelah 4
    if(stage >= 4 && newSize > startFontSize){
        newStage = Math.min(8, stage + 1);
    }

    updateStage(newStage);
});

document.addEventListener("mouseup",()=>{
    isDragging = false;
});

</script>

</body>
</html>
